{% extends 'base.html.twig' %}

{% block title %}Hello ConversationController!{% endblock %}

{% block body %}
    <style>
        .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
        .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    </style>

    <div class="example-wrapper">
 {% if( conversation.who.username is defined ) %}

    <img src="{{  asset(conversation.width.profileImage)}}" width="100" height="100"/> <img src="{{  asset(conversation.who.profileImage)}}" width="100" height="100"/>
{{ '(utilisateur)' }}  {{ conversation.who.username }}
        {% else %}
            <img src="{{  asset(conversation.who.profileImage)}}" width="100" height="100"/>
{{ '(entreprise)' }}{{  conversation.who.nameOfCompany }}
        {% endif %}
    </div>
    {% for  message in messages  %}
        {% if(message.companyOwner) %}

            <div>{{ message.createdAt|date("d/m/Y H:s" ) }}{{ message.companyOwner.nameOfCompany }}<img src="{{  asset(message.companyOwner.profileImage)}}" width="50" height="50"/><p class="{{  (message.companyOwner ==  conversation.who) ?  'recipient'  :  'talker'  }}">{{ message.message }}</p></div>
        {% else %}
            <div>{{ message.createdAt|date("d/m/Y H:s" ) }} - {{ message.userOwner.username }}<img src="{{  asset(message.userOwner.profileImage)}}" width="50" height="50"/><p class="{{  (message.userOwner ==  conversation.who) ?  'recipient'  :  'talker'  }}">{{ message.message }}</p></div>
        {% endif %}

        <br>

    {% endfor %}
    {{ form_start(messageForm) }}
    <button type="submit">ok</button>
    {{ form_end(messageForm) }}
{% endblock %}
